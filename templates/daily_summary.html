{% extends "base.html" %}

{% block title %}Daily Shift Summary{% endblock %}

{% block page_title %}Daily Shift Summary{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">Shift Details</h3>
    </div>
    <div class="card-body">
        <form id="dailySummaryForm">
            <!-- General Shift Info -->
            <div class="row">
                <div class="form-group col-md-4">
                    <label for="summaryDate">Date</label>
                    <input type="date" class="form-control" id="summaryDate" required>
                </div>
                <div class="form-group col-md-4">
                    <label for="teamLeader">Team Leader</label>
                    <input type="text" class="form-control" id="teamLeader" placeholder="Enter Team Leader's Name">
                </div>
                <div class="form-group col-md-4">
                    <label for="shift">Shift</label>
                    <select id="shift" class="form-control">
                        <option value="Days">Days</option>
                        <option value="Afternoons">Afternoons</option>
                    </select>
                </div>
            </div>

            <!-- Department Selection Tabs -->
            <ul class="nav nav-tabs" id="departmentTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="mfg-tab" data-toggle="tab" href="#manufacturing" role="tab">Manufacturing</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="fin-tab" data-toggle="tab" href="#finishing" role="tab">Finishing</a>
                </li>
            </ul>

            <div class="tab-content" id="departmentTabContent">
                <!-- Manufacturing Tab -->
                <div class="tab-pane fade show active" id="manufacturing" role="tabpanel">
                    <div id="manufacturing-accordion" class="mt-3">
                        <!-- CNC Section -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <button type="button" class="btn btn-link" data-toggle="collapse" data-target="#cnc-collapse">
                                        CNC
                                    </button>
                                </h5>
                            </div>
                            <div id="cnc-collapse" class="collapse" data-parent="#manufacturing-accordion">
                                <div class="card-body">
                                    <div class="form-group">
                                        <label for="cncJob">Job</label>
                                        <select class="form-control job-dropdown" id="cncJob"></select>
                                    </div>
                                    <h6>Sheets Cut</h6>
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label for="sheetsCutMtr">MTR</label>
                                            <input type="number" class="form-control" id="sheetsCutMtr" placeholder="MTR Sheets Qty">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="sheetsCutCs43">CS43</label>
                                            <input type="number" class="form-control" id="sheetsCutCs43" placeholder="CS43 Sheets Qty">
                                        </div>
                                    </div>
                                    <h6>MDF Doors Cut</h6>
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label for="mdfDoorsCutMtr">MTR</label>
                                            <input type="number" class="form-control" id="mdfDoorsCutMtr" placeholder="MTR MDF Doors Qty">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="mdfDoorsCutCs43">CS43</label>
                                            <input type="number" class="form-control" id="mdfDoorsCutCs43" placeholder="CS43 MDF Doors Qty">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Edgebander Section -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <button type="button" class="btn btn-link" data-toggle="collapse" data-target="#eb-collapse">
                                        Edge Bander
                                    </button>
                                </h5>
                            </div>
                            <div id="eb-collapse" class="collapse" data-parent="#manufacturing-accordion">
                                <div class="card-body">
                                     <div class="form-group">
                                        <label for="ebJob">Job</label>
                                        <select class="form-control job-dropdown" id="ebJob"></select>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-4">
                                            <label for="edgebandingRan">Linear Meters Ran</label>
                                            <input type="number" step="0.01" class="form-control" id="edgebandingRan">
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label for="edgebandingChangeovers"># Change Overs</label>
                                            <input type="number" class="form-control" id="edgebandingChangeovers">
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label for="manualEdgebanding">Manual EB Parts</label>
                                            <input type="number" class="form-control" id="manualEdgebanding">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Assembly Section -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <button type="button" class="btn btn-link" data-toggle="collapse" data-target="#assy-collapse">
                                        Assembly
                                    </button>
                                </h5>
                            </div>
                            <div id="assy-collapse" class="collapse" data-parent="#manufacturing-accordion">
                                <div class="card-body">
                                     <div class="form-group">
                                        <label for="assyJob">Job</label>
                                        <select class="form-control job-dropdown" id="assyJob"></select>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-3">
                                            <label for="drawerBoxesBuilt">Drawer Boxes Built</label>
                                            <input type="number" class="form-control" id="drawerBoxesBuilt">
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label for="boxesPrepped">Boxes Prepped</label>
                                            <input type="number" class="form-control" id="boxesPrepped">
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label for="boxesBuilt">Boxes Built</label>
                                            <input type="number" class="form-control" id="boxesBuilt">
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label for="boxesHung">Boxes Hung</label>
                                            <input type="number" class="form-control" id="boxesHung">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Finishing Tab -->
                <div class="tab-pane fade" id="finishing" role="tabpanel">
                    <p class="mt-3">Finishing details are tracked on the Finishing WIP page. Use the notes below for any general shift summary information for the Finishing department.</p>
                </div>
            </div>

            <!-- Staff and Notes -->
            <div class="form-group mt-3">
                <label for="employeeId">Employee Submitting</label>
                <select id="employeeId" class="form-control" required></select>
            </div>
            <div class="form-group">
                <label for="notes">Additional Notes (Downtime, Attendance, etc.)</label>
                <textarea class="form-control" id="notes" rows="3"></textarea>
            </div>

            <button type="submit" class="btn btn-primary mt-3">Submit Summary</button>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_body_scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/daily_summary.js') }}"></script>
{% endblock %}